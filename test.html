<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>portfolio test ‚Äî smooth scroller</title>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

    <style>
        :root{ --duration: 800ms; --indicator-right: 28px; --indicator-gap: 18px }
        *{box-sizing:border-box}
        body {
            margin: 0;
            font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
            height: 100vh;
            overflow: hidden; /* hide native scroll */
            color: #fff;
            background: #d8f38a; /* match lime-ish background from image for easier preview */
        }

        /* viewport / scroller */
        .viewport {
            width:100vw;
            height:100vh;
            position:relative;
            overflow:hidden;
        }

        .scroller {
            width:100%;
            will-change: transform;
            transition: transform var(--duration) cubic-bezier(0.22, 0.8, 0.36, 1);
            transform: translateY(0);
        }

        .item {
            width:100vw;
            height:100vh;
            display:flex;
            align-items:center;
            justify-content:center;
            font-size:6vw;
            color:#0b1220;
        }

        .item-inner{ width:100%; height:100%; display:flex; align-items:center; justify-content:center }

        .item:nth-child(odd){ background: linear-gradient(180deg,#fff,#fff) }
        .item:nth-child(even){ background: linear-gradient(180deg,#2593,#2593) }

        /* disables text highlighting */
        /* .no-select{user-select:none;-webkit-user-select:none} */

        /* SECTION INDICATOR ‚Äî positioned right, vertically centered */
        .section-indicator {
            position: fixed;
            right: var(--indicator-right);
            top: 85%;
            transform: translateY(-50%);
            z-index: 120;
            display: flex;
            flex-direction: column;
            gap: var(--indicator-gap);
            align-items: center;
            pointer-events: auto;
        }

        .indicator-item {
            width: 14px;
            height: 14px;
            display: grid;
            place-items: center;
            transition: transform 260ms cubic-bezier(.2,.9,.25,1), background-color 260ms ease, border-color 260ms ease, opacity 260ms ease, box-shadow 260ms ease;
            opacity: 0.95;
            cursor: pointer;
            background: transparent;
            border: 0;
            padding: 0;
        }

        /* DIAMOND (inactive style) ‚Äî rotated filled square */
        .indicator-item.diamond {
            width: 12px;
            height: 12px;
            background: #3A84E1; /* blue base */
            transform: rotate(45deg);
            border-radius: 3px;
            box-shadow: 0 2px 6px rgba(53,32,217,0.12);
            border: 1px solid rgba(0,0,0,0.06);
        }

        /* OUTLINE (active style) ‚Äî outline only, no fill */
        .indicator-item.outline {
            width: 18px;
            height: 18px;
            border: 2px solid #3A84E1; /* blue outline */
            background: transparent;
            border-radius: 3px;
            transform: rotate(0deg) scale(1.06);
            box-shadow: 0 6px 18px rgba(59,43,230,0.12);
        }

        /* small-screen tweaks */
        @media (max-width: 480px){
            :root{ --indicator-right: 16px; --indicator-gap: 12px }
            .indicator-item{ width:16px; height:16px }
            .indicator-item.diamond{ width:14px; height:14px }
        }

        .sidenav {
            position: fixed;
            left: -250px;
            top: 100px;
            height: 320px;
            width: 250px;
            background: #3A84E1;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            justify-content: center;
            z-index: 130;
            transition: left 0.3s ease;
            border-radius: 6px 6px 6px 6px;
            padding-left: 18px;
        }

        .check {
            position: fixed;
            left: 28px;
            top: 28px;
            z-index: 140;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
        }

        #checkbox {
            display: none;
        }

        .toggle {
            position: relative;
            width: 40px;
            height: 40px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition-duration: .5s;
        }

        .bars {
            width: 100%;
            height: 4px;
            background-color: #3A84E1;
            border-radius: 4px;
        }

        #bar2 {
            transition-duration: .8s;
        }

        #bar1,#bar3 {
            width: 70%;
        }

        #checkbox:checked + .toggle .bars {
            position: absolute;
            transition-duration: .5s;
        }

        #checkbox:checked + .toggle #bar2 {
            transform: scaleX(0);
            transition-duration: .5s;
        }

        #checkbox:checked + .toggle #bar1 {
            width: 100%;
            transform: rotate(45deg);
            transition-duration: .5s;
        }

        #checkbox:checked + .toggle #bar3 {
            width: 100%;
            transform: rotate(-45deg);
            transition-duration: .5s;
        }

        #checkbox:checked + .toggle {
            transition-duration: .5s;
            transform: rotate(180deg);
        }

        </style>
    </head>
    <body>
        <div class="container">
        <!-- Toggle Button for Sidenav -->
        <button class="check" id="sidenavToggleBtn">
            <input type="checkbox" id="checkbox" />
            <label for="checkbox" class="toggle">
                <div class="bars" id="bar1"></div>
                <div class="bars" id="bar2"></div>
                <div class="bars" id="bar3"></div>
            </label>
        </button>
        <!-- Simple Sidenav (hidden by default, left side, not full height) -->
        <nav class="sidenav" id="sidenav">
            <a href="#home" style="margin:18px 0;color:#fff;text-decoration:none;font-size:20px;display:flex;align-items:center;gap:10px;" title="Home">üè† <span>Home</span></a>
            <a href="#work" style="margin:18px 0;color:#fff;text-decoration:none;font-size:20px;display:flex;align-items:center;gap:10px;" title="Work">üíº <span>Work</span></a>
            <a href="#shelf" style="margin:18px 0;color:#fff;text-decoration:none;font-size:20px;display:flex;align-items:center;gap:10px;" title="Shelf">üìö <span>Shelf</span></a>
            <a href="#resume" style="margin:18px 0;color:#fff;text-decoration:none;font-size:20px;display:flex;align-items:center;gap:10px;" title="Resume">üìÑ <span>Resume</span></a>
        </nav>
        <!-- Section indicator positioned to the right -->
        <div class="section-indicator" id="sectionIndicator" aria-hidden="false">
            <button class="indicator-item" data-index="0" aria-label="Go to Home" title="Home"></button>
            <button class="indicator-item" data-index="1" aria-label="Go to Work" title="Work"></button>
            <button class="indicator-item" data-index="2" aria-label="Go to Shelf" title="Shelf"></button>
            <button class="indicator-item" data-index="3" aria-label="Go to Resume" title="Resume"></button>
            <button class="indicator-item" data-index="4" aria-label="Go to Misc" title="Misc"></button>
        </div>
    
        <div class="viewport no-select" id="viewport">
            <div class="scroller" id="scroller">
                <section class="item" id="home"><div class="item-inner">Hello world üåç</div></section>
                <section class="item" id="work"><div class="item-inner">I build cool stuff üß∏</div></section>
                <section class="item" id="shelf"><div class="item-inner">code everyday üßë‚Äçüíª</div></section>
                <section class="item" id="resume"><div class="item-inner">CSS and JS ‚ú®</div></section>
                <section class="item" id="misc"><div class="item-inner">and hope it works üí°</div></section>
            </div>
        </div>
    </div>

    <script>
        const scroller = document.getElementById('scroller');
        const viewport = document.getElementById('viewport');
        const sections = scroller.children;
        const total = sections.length;
        let index = 0;
        let isAnimating = false;
        const DURATION = 800; // ms ‚Äî default duration

        // small guard so repeated wheel events in the same direction don't skip multiple sections
        let lastAction = 0;
        let lastDir = 0;

        const indicator = document.getElementById('sectionIndicator');
        const indicators = Array.from(indicator.querySelectorAll('.indicator-item'));

        // initialize default classes: all inactive = diamond
        indicators.forEach((el) => el.classList.add('diamond'));

        function updateIndicator() {
            indicators.forEach((el) => {
                el.classList.remove('active','diamond','outline');
            });

            // active one becomes outline (outline only)
            const active = indicators[index];
            if (active) {
                active.classList.add('active','outline');
            }

            // ensure all others are diamonds
            indicators.forEach((el, i) => {
                if (i !== index) el.classList.add('diamond');
            });
        }

        function goTo(i){
            const newIndex = Math.max(0, Math.min(total - 1, i));
            if (newIndex === index) return;
            index = newIndex;
            isAnimating = true;
            scroller.style.transform = `translateY(-${index * 100}vh)`;
            updateIndicator();
            // reset animation lock after duration
            setTimeout(()=> isAnimating = false, DURATION + 30);
        }

        // click on indicators to jump
        indicators.forEach((el) => {
            el.addEventListener('click', (e) => {
                const i = Number(el.getAttribute('data-index'));
                goTo(i);
            });
        });

        // Sidenav click support
        document.querySelectorAll('.sidenav a').forEach((el, i) => {
            el.addEventListener('click', function(e){
                e.preventDefault();
                goTo(i);
                hideSidenav();
            });
        });

        // Wheel handler: allow reversing mid-animation, but prevent rapid same-direction jumps
        viewport.addEventListener('wheel', (e) => {
            e.preventDefault();
            const now = Date.now();
            const direction = e.deltaY > 0 ? 1 : -1;

            // if same direction fired too quickly, ignore
            if (direction === lastDir && now - lastAction < 150) return;

            lastAction = now;
            lastDir = direction;

            if (direction > 0) goTo(index + 1);
            else goTo(index - 1);
        }, { passive: false });

        // Keyboard
        window.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowDown' || e.key === 'PageDown') { goTo(index + 1); }
            if (e.key === 'ArrowUp' || e.key === 'PageUp') { goTo(index - 1); }
            if (e.key === 'Home') { goTo(0); }
            if (e.key === 'End') { goTo(total - 1); }
        });

        // Touch support (basic) ‚Äî allows reverse swipes anytime
        let startY = 0;
        viewport.addEventListener('touchstart', (e) => {
            startY = e.touches[0].clientY;
        }, { passive: true });

        viewport.addEventListener('touchend', (e) => {
            const endY = e.changedTouches[0].clientY;
            const diff = startY - endY;
            if (Math.abs(diff) < 40) return; // ignore small swipes
            if (diff > 0) goTo(index + 1);
            else goTo(index - 1);
        });

        const sidenav = document.getElementById('sidenav');
        const sidenavToggleBtn = document.getElementById('sidenavToggleBtn');
        const checkbox = document.getElementById('checkbox');
        let sidenavVisible = false;

        function showSidenav() {
            sidenav.style.left = '28px';
            sidenavVisible = true;
            checkbox.checked = true;
        }
        function hideSidenav() {
            sidenav.style.left = '-250px';
            sidenavVisible = false;
            checkbox.checked = false;
        }

        function toggleSidenav() {
            sidenavVisible ? hideSidenav() : showSidenav();
        }

        sidenavToggleBtn.addEventListener('click', toggleSidenav);
        checkbox.addEventListener('change', toggleSidenav);

        // Hide sidenav when clicking outside
        document.addEventListener('click', function (e) {
            if (sidenavVisible && !sidenav.contains(e.target) && !sidenavToggleBtn.contains(e.target)) {
                hideSidenav();
            }
        });

    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>test</title>
    <link rel="shortcut icon" href="img/my logo-no_bg.png" type="image/x-icon">
    <!-- css -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="test.css">
    <!-- AOS (Animate On Scroll Library) -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet">
    <!-- icons -->
    <script src="https://cdn.lordicon.com/lordicon.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    </head>
    <body>
        <!-- Toggle Button for Sidenav -->
        <button class="check" id="sidenavToggleBtn">
            <input type="checkbox" id="checkbox" />
            <label for="checkbox" class="toggle">
                <div class="bars" id="bar1"></div>
                <div class="bars" id="bar2"></div>
                <div class="bars" id="bar3"></div>
            </label>
        </button>
        <!-- Simple Sidenav (hidden by default, left side, not full height) -->
        <nav class="sidenav" id="sidenav">
            <a href="#home" class="links" title="Home">ğŸ  <span>Home</span></a>
            <a href="#work" class="links" title="Work">ğŸ’¼ <span>Work</span></a>
            <a href="#shelf" class="links" title="Shelf">ğŸ“š <span>Shelf</span></a>
            <a href="#resume" class="links mb-4" title="Resume">ğŸ“„ <span>Resume</span></a>
            <hr style="width:90%;border:1px solid rgba(255,255,255,0.2);margin:0 0 20px 0;">
            
            <div class="icons">
                <!-- github -->
                <a class="lords" href="https://github.com/trustonyekwere" target="_blank" rel="noopener noreferrer">
                    <lord-icon
                        src="https://cdn.lordicon.com/jjxzcivr.json"
                        trigger="hover"
                        colors="primary:#fff,secondary:#fff"
                        style="width:40px;height:40px">
                    </lord-icon>
                </a>
                <!-- linkedin -->
                <a class="lords" href="https://www.linkedin.com/in/onyekwere-trust/" target="_blank" rel="noopener noreferrer">
                    <lord-icon
                        src="https://cdn.lordicon.com/qgebwute.json"
                        trigger="hover"
                        colors="primary:#ffffff,secondary:#ffffff"
                        style="width:40px;height:40px">
                    </lord-icon>
                </a>
                <!-- x -->
                <a class="lords" href="https://x.com/toristudios18" target="_blank" rel="noopener noreferrer">
                    <lord-icon
                        src="https://cdn.lordicon.com/yizwahhw.json"
                        trigger="hover"
                        colors="primary:#ffffff,secondary:#ffffff"
                        style="width:40px;height:40px">
                    </lord-icon>
                </a>
                <!-- instagram -->
                <a class="lords" href="https://www.instagram.com/toristudios18/" target="_blank" rel="noopener noreferrer">
                    <lord-icon
                        src="https://cdn.lordicon.com/tgyvxauj.json"
                        trigger="hover"
                        colors="primary:#ffffff,secondary:#ffffff"
                        style="width:40px;height:40px">
                    </lord-icon>
                </a>
            </div>
        </nav>

        <!-- Section indicator positioned to the right -->
        <div class="section-indicator" id="sectionIndicator" aria-hidden="false">
            <button class="indicator-item" data-index="0" aria-label="Go to Home" title="Home"></button>
            <button class="indicator-item" data-index="1" aria-label="Go to Work" title="Work"></button>
            <button class="indicator-item" data-index="2" aria-label="Go to Shelf" title="Shelf"></button>
            <button class="indicator-item" data-index="3" aria-label="Go to Resume" title="Resume"></button>
            <button class="indicator-item" data-index="4" aria-label="Go to Misc" title="Misc"></button>
        </div>
    
        <div class="viewport no-select" id="viewport">
            <div class="scroller" id="scroller">
                <section class="item" id="home"><div class="item-inner">Hello world ğŸŒ</div></section>
                <section class="item" id="work"><div class="item-inner">I build cool stuff ğŸ§¸</div></section>
                <section class="item" id="shelf"><div class="item-inner">code everyday ğŸ§‘â€ğŸ’»</div></section>
                <section class="item" id="resume"><div class="item-inner">CSS and JS âœ¨</div></section>
                <section class="item" id="misc"><div class="item-inner">and hope it works ğŸ’¡</div></section>
            </div>
        </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    
    <!-- AOS JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>

    <script>
        AOS.init({
            once: true  // Animation happens only once as you scroll down
        });
    </script>

    <script>
        const scroller = document.getElementById('scroller');
        const viewport = document.getElementById('viewport');
        const sections = scroller.children;
        const total = sections.length;
        let index = 0;
        let isAnimating = false;
        const DURATION = 800; // ms â€” default duration

        // small guard so repeated wheel events in the same direction don't skip multiple sections
        let lastAction = 0;
        let lastDir = 0;

        const indicator = document.getElementById('sectionIndicator');
        const indicators = Array.from(indicator.querySelectorAll('.indicator-item'));

        // initialize default classes: all inactive = diamond
        indicators.forEach((el) => el.classList.add('diamond'));

        function updateIndicator() {
            indicators.forEach((el) => {
                el.classList.remove('active','diamond','outline');
            });

            // active one becomes outline (outline only)
            const active = indicators[index];
            if (active) {
                active.classList.add('active','outline');
            }

            // ensure all others are diamonds
            indicators.forEach((el, i) => {
                if (i !== index) el.classList.add('diamond');
            });
        }

        function goTo(i){
            const newIndex = Math.max(0, Math.min(total - 1, i));
            if (newIndex === index) return;
            index = newIndex;
            isAnimating = true;
            scroller.style.transform = `translateY(-${index * 100}vh)`;
            updateIndicator();
            // reset animation lock after duration
            setTimeout(()=> isAnimating = false, DURATION + 30);
        }

        // click on indicators to jump
        indicators.forEach((el) => {
            el.addEventListener('click', (e) => {
                const i = Number(el.getAttribute('data-index'));
                goTo(i);
            });
        });

        // Sidenav click support
        document.querySelectorAll('.sidenav a').forEach((el) => {
            el.addEventListener('click', function(e) {
                const href = el.getAttribute('href');

                if (href && href.startsWith('#')) {
                    // Internal section link
                    e.preventDefault();
                    const targetId = href.slice(1); // remove the #
                    const targetIndex = Array.from(sections).findIndex(s => s.id === targetId);
                    if (targetIndex !== -1) goTo(targetIndex);
                }
                
                hideSidenav(); // Always close after click
            });
        });

        // Wheel handler: allow reversing mid-animation, but prevent rapid same-direction jumps
        viewport.addEventListener('wheel', (e) => {
            e.preventDefault();
            const now = Date.now();
            const direction = e.deltaY > 0 ? 1 : -1;

            // if same direction fired too quickly, ignore
            if (direction === lastDir && now - lastAction < 150) return;

            lastAction = now;
            lastDir = direction;

            if (direction > 0) goTo(index + 1);
            else goTo(index - 1);
        }, { passive: false });

        // Keyboard
        window.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowDown' || e.key === 'PageDown') { goTo(index + 1); }
            if (e.key === 'ArrowUp' || e.key === 'PageUp') { goTo(index - 1); }
            if (e.key === 'Home') { goTo(0); }
            if (e.key === 'End') { goTo(total - 1); }
        });

        // Touch support (basic) â€” allows reverse swipes anytime
        let startY = 0;
        viewport.addEventListener('touchstart', (e) => {
            startY = e.touches[0].clientY;
        }, { passive: true });

        viewport.addEventListener('touchend', (e) => {
            const endY = e.changedTouches[0].clientY;
            const diff = startY - endY;
            if (Math.abs(diff) < 40) return; // ignore small swipes
            if (diff > 0) goTo(index + 1);
            else goTo(index - 1);
        });

        // Sidenav functionality
        const sidenav = document.getElementById('sidenav');
        const sidenavToggleBtn = document.getElementById('sidenavToggleBtn');
        const checkbox = document.getElementById('checkbox');
        let sidenavVisible = false;

        function showSidenav() {
            sidenav.style.left = '28px';
            sidenavVisible = true;
            checkbox.checked = true;
        }

        function hideSidenav() {
            sidenav.style.left = '-250px';
            sidenavVisible = false;
            checkbox.checked = false;
        }

        function toggleSidenav() {
            sidenavVisible ? hideSidenav() : showSidenav();
        }

        sidenavToggleBtn.addEventListener('click', toggleSidenav);
        checkbox.addEventListener('change', toggleSidenav);

        // Handle clicks *inside* sidenav
        sidenav.addEventListener('click', function (e) {
            const link = e.target.closest('a');
            if (!link) return;

            // Internal links (start with "#") â†’ navigate + close
            if (link.getAttribute('href').startsWith('#')) {
                hideSidenav();
            }
            // External links â†’ just let browser handle it (no preventDefault)
        });

        // Hide sidenav when clicking outside
        document.addEventListener('click', function (e) {
            if (sidenavVisible && !e.target.closest('#sidenav') && !sidenavToggleBtn.contains(e.target)) {
                hideSidenav();
            }
        });

    </script>
</body>
</html>
